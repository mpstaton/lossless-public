---
import "@styles/global.css";
import Card from "@basics/Card.astro";
import CardRow from "@basics/CardRow.astro";
import { getEntry } from 'astro:content';

type Card = {
  id: string;
  title: string;
  content: string;
  order?: number;
  tags?: string[];
  imageUrl?: string;
};

const featuresData = await getEntry('cards', 'features');
const cards = featuresData?.data?.cards ?? [];
---

<div id="main-content-col">
  <h1>Here is the Main Content</h1>
  {cards && cards.length > 0 ? (
    <CardRow columns={3} gap="2rem">
      {cards
        .sort((a: Card, b: Card) => (a.order ?? 0) - (b.order ?? 0))
        .map((card: Card) => (
          <Card 
            title={card.title}
            imageUrl={card.imageUrl} 
            imageAlt={card.title}
          >
            {card.content}
          </Card>
        ))}
    </CardRow>
  ) : (
    <p>No cards found</p>
  )}
</div>

<style>
  #main-content-col {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 2rem 0;
  }

  h1 {
    margin-bottom: 2rem;
    text-align: center;
  }
</style>
